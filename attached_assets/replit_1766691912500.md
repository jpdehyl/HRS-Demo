# Sales Coach Automation

## Overview

This application automates the sales coaching workflow by monitoring Google Drive for audio files, transcribing them using Gemini AI, analyzing them against a knowledge base, and sending personalized coaching feedback via email. It aims to streamline coaching, enhance SDR performance, and provide managers with comprehensive reporting and live coaching capabilities.

## User Preferences

I prefer simple language and detailed explanations. I want iterative development with frequent check-ins. Ask before making major changes to the project structure or core functionalities. I like functional programming paradigms where applicable. Do not make changes to the `shared/schema.ts` file without explicit instruction.

## System Architecture

The system features a client-server architecture with an Express backend and a Vite React frontend.

**UI/UX Decisions:**
- **Interactive 3D Landing Page:** Utilizes Three.js for immersive particle animations with WebGL and MediaPipe for hand gesture control, offering various shape templates and Hawk Ridge branding (Montserrat/Hind fonts, #2C88C9/#F26419 color scheme).
- **Dashboard:** Provides a comprehensive view of metrics, processing queues, SDR and manager directories, analytics, and reports.
- **Shadcn UI:** Used for consistent and modern UI components.

**Technical Implementations:**
- **Google Drive Monitoring:** Watches a designated 'INBOX' folder for audio files.
- **Filename Parsing:** Extracts SDR ID, date, time, and action type from filenames (`SDR-IDYYMMDDHHmmAction.ext`).
- **AI-Powered Transcription & Analysis:** Uses Gemini AI for audio transcription and analysis against a configurable company knowledge base to generate coaching feedback (1 strength, 1 improvement).
- **Email Automation:** Sends personalized coaching feedback to SDRs (CC to managers) and generates various reports (daily, weekly, monthly) with PDF attachments.
- **Report Storage & Dashboard:** Stores generated reports in a PostgreSQL database and displays them on a dedicated dashboard with filtering capabilities.
- **Manager Management System:** Full CRUD for sales managers, including email schedules, vacation mode with delegate assignments, and pause functionality.
- **SDR Enhancements:** Gender-aware emails, individual SDR performance tracking, and manager assignment.
- **Live Coaching:**
    - **Twilio Voice Integration:** Browser-based softphone with real-time transcription (Google Speech-to-Text), WebSocket-powered live transcript display, and Gemini-powered AI coaching tips. Supports dual-track transcription for SDR and customer.
    - **Twilio Recording to Google Drive:** Automatic download of call recordings to Google Drive INBOX folder. Uses `record: "record-from-answer-dual"` with recording status callback at `/api/twilio/recording-status`.
    - **Zoom Integration:** Real-time meeting streaming (RTMS) for live coaching sessions, real-time transcript storage, AI-generated tips, and an embedded Zoom sidebar app.
- **Lead Intel (Pre-Call Intelligence):**
    - **Lead Database:** Stores and manages lead information.
    - **Google Sheets Import & AI Research:** Imports leads from Google Sheets and uses Gemini-powered AI for company/contact research with web grounding.
    - **Dynamic Portfolio Fit Scoring:** Calculates a 0-100 score based on Google Doc parameters.
    - **Talk Track Generator:** Generates personalized openers, discovery questions, and objection handles.
    - **Company Hard Intel:** Collects comprehensive company data including location, industry, size, financials, executives, news, certifications, and competitors.
- **WebSocket Architecture:** Utilizes `noServer: true` for WebSockets to avoid conflicts with Vite HMR, with separate endpoints for frontend updates and Twilio media streams.
- **Database:** PostgreSQL for all data storage.
- **ORMs/Libraries:** Drizzle for database interactions.

**Feature Specifications:**
- **Email Types:** Coaching emails (SDR + CC manager), Daily Summary (manager only), Weekly Reports (manager, PDF), Monthly Reports (manager, comprehensive).
- **Analytics & Reporting:** Automated weekly and monthly reports with trend analysis and preview capabilities.

## External Dependencies

- **Google Drive API:** For monitoring and managing audio files.
- **Gmail API:** For sending emails with attachments.
- **Gemini AI (Google AI Studio):** For audio transcription, transcript analysis, lead research, and AI coaching tips.
- **PostgreSQL:** Primary database.
- **Twilio Voice API:** For live call functionality, real-time transcription, and managing call sessions.
- **Zoom API & RTMS:** For live coaching integration and real-time meeting data.
- **MediaPipe:** For hand gesture recognition on the landing page.
- **Three.js:** For 3D graphics on the landing page.
- **Google Sheets API:** For importing leads.
- **SerpAPI:** For LinkedIn profile discovery during lead research.